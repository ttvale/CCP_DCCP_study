Re-code the depot sample from the book Agile web development with Rails